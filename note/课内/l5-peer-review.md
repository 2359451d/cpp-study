# Lecture 5 Peer Code Review 同行代码审查

## 代码审阅：Code Reviews in Industry

![](/static/2020-11-12-03-59-47.png)
![](/static/2020-11-12-04-36-32.png)

* peer code review
  * 对源码的系统审阅
  * 发现在初始开发阶段被忽略的错误，以改进品质
* **多种形式**
  * pair programming
  * informal walkthroughs
  * formal inspections
* 测试和/或验证可以帮助提高对功能正确性的信心
* **代码评审提高了软件质量(通常是50-65%** ，对于安全关键性提高更高) ,
  * 删除可能漏洞，如竞争条件race condition，内存泄漏和缓冲区溢出
  * 提高可维护性

## Code Review in SP

![](/static/2020-11-12-04-38-26.png)

* 自动测试套件
  * 检测功能性正确性
* 软件品质
  * 请教专家
  * 询问同行

## Expert Review

专家审阅
![](/static/2020-11-12-04-39-41.png)

缓慢: 200项重大任务

最小的反馈

## Reading someone 's code

![](/static/2020-11-12-04-40-07.png)

## Peer Review in Brief & Involves

![](/static/2020-11-12-04-40-26.png)
![](/static/2020-11-12-04-40-56.png)

* Reviewing - 审阅
  * 多个同行的代码
* Reflecting - 反映
  * 作业要求
* Judging - 判断
  * 根据criteria评分标准评判作业

## Benefits of Peer Review

![](/static/2020-11-12-04-42-50.png)

它支持代码审查技能的开发

培养情感技能(如应对批评等)

它揭开了评分过程的神秘面纱

提供丰富、及时的反馈

## Aropä

![](/static/2020-11-12-04-44-02.png)

* 基于web的同行审查管理工具
  * 开发于奥克兰大学，并应用于计算(也包括法律，工程，英语，电影，管理，音乐，药理学，...)
* 目的是支持同行评议作为一个常规活动，甚至在大班
  * 日常使用（频繁的审阅）可以克服最初的焦虑
  * 技能需要时间来培养
  * 这项技术可以扩展到任意大的类

## How SP reviewing works

![](/static/2020-11-12-04-45-10.png)
![](/static/2020-11-12-04-47-59.png)
![](/static/2020-11-12-04-50-02.png)

学生尝试更具挑战性的作业复习/由同时完成挑战性作业的学生审阅。对于简单的任务也是如此。

另外两个学生的作业将随机和匿名分配给你审阅

* 您将获得**标准解决方案**、**测试数据文件**、**测试代码**和**详细的评分指南**
* 一旦评审完成，**会检查评审的完整性和一致性**

## 可能的反对意见：Possible Objections

![](/static/2020-11-12-04-51-54.png)
![](/static/2020-11-12-04-54-35.png)

* 一致性
  * 当审阅者不同意时 - **适度自动检测**
* 能力
  * 我的同行不能做出有意义的判断” - **具有挑战性/挑战性和简单/简单**
* 公平
  * 我没有得到一个合适的分数: 两个匿名的评论者同意。**申诉**
* 偏袒
  * 学生会偏袒他们的朋友，对他们的竞争对手刻薄 - **匿名审阅**
* 不平衡
  * 我写了仔细的审阅，却收到了垃圾审阅” : - **依靠社区精神**
* 时间
  * 2~3小时
* 适当性

## Review Tips

![](/static/2020-11-12-04-56-24.png)

* 试着宽大处理，
  * 例如，如果有一个简单的bug修复，提供它，但不要太宽大
* 尽量提供有用的评论