# lecture 1-2

* [lecture 1-2](#lecture-1-2)
  * [compiling a c program](#compiling-a-c-program)
  * [---------](#hr)
  * [L2](#l2)
  * [随机数：rand() & srand()](#随机数rand--srand)
  * [Compiler warnings & errors](#compiler-warnings--errors)

## compiling a c program

编译过程

1. 预处理器展开宏（文本替换）
2. 编译阶段
   1. 源码被解析，成为**中间码 intermediate representation**
   2. 生成汇编语言 assembly code
   3. 生成**机器码** machine code in **object file（目标文件）**
3. 连接器链接所有目标文件linker combines multiple object files，生成可执行文件

编译

* `clang source.c -o program`

查看预处理（进行宏展开后文件）

* `clang source.c -E -o source.e`

查看中间码（汇编之前，预处理后，源码被解析）

* `clang source.c -emit-llvm -S -o source.llvm`
  * 翻译成`LLVM`中间码，由`LLVM`做优化

查看汇编代码

* `clang source.c -S -o source.s`

查看机器码（目标文件）

* `clang source.c -c -o source.o`

链接目标文件，生成可执行文件

* `clang main.o -o main`
* `clang source.c -o main`
* 执行`./main`

## ---------

## L2

## 随机数：rand() & srand()

使用rand()前，必须用`srand()`设置随机数种子

* 如不设置，调用`rand()`时，自动将随机数种子设为`1`
* **设置不同种子，这样计算出来的随机序列就不完全相同了**

`rand()`

* 返回`0~RAND_MAX`之间的int

```c
main(){
  srand(time(NULL));
  for(i=0;i<10;i++){
    k=rand()%100+1;
    // rand()%100表示，取100以内的随机数。生成随机数之后，再对100取余
  }
}

```

## Compiler warnings & errors

编译器警告&错误

* `-Werror`
  * 将所有warnings转为errors
  * make it impossible to compile
  * 显示编译器认为会出现的警告
* `-Wall`
  * enables most compiler warnings
  * 编译后显示所有警告
* 注意使结合用`-Wall -Werror`