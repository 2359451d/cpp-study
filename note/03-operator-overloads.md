# Operator Overloads

è¿ç®—ç¬¦é‡è½½

* å¯¹**å·²æœ‰çš„è¿ç®—ç¬¦é‡æ–°è¿›è¡Œå®šä¹‰ï¼Œèµ‹äºˆå…¶å¦ä¸€ç§åŠŸèƒ½**ï¼Œä»¥é€‚åº”ä¸åŒçš„æ•°æ®ç±»å‹
  * åªèƒ½æ˜¯**è‡ªå®šä¹‰æ•°æ®ç±»å‹**
    * å¯¹äº**å†…ç½®çš„æ•°æ®ç±»å‹**çš„è¡¨è¾¾å¼çš„çš„**è¿ç®—ç¬¦**æ˜¯**ä¸å¯èƒ½æ”¹å˜çš„**
* <font color="red">å…è®¸å­˜åœ¨,è¿ç®—ç¬¦å‡½æ•°é‡è½½</font>
* <font color="blue">æ³¨æ„è¿”å›å¼•ç”¨</font>
  * æœ‰æ—¶å€™æ˜¯ä¸ºäº†**æé«˜æ•ˆç‡**,ä¸å¿…åœ¨å¤–éƒ¨å†**éšå¼åˆ›å»ºå‰¯æœ¬**æ¥æ”¶(å€¼æ–¹å¼è¿”å›)
  * æœ‰æ—¶å€™ä¸ºäº†**å¯¹ä¸€ä¸ªæ•°æ®è¿›è¡Œè¿ç»­è¿ç®—æ“ä½œ**

* [Operator Overloads](#operator-overloads)
  * [+](#ulliliul)
  * [<<](#)
  * [++](#-1)
    * [å¼•ç”¨ & å€¼ & é“¾å¼æ“ä½œ](#å¼•ç”¨--å€¼--é“¾å¼æ“ä½œ)

## +

åŠ å·è¿ç®—ç¬¦é‡è½½

* å®ç°**è‡ªå®šä¹‰æ•°æ®ç±»å‹**çš„`+`
* å®ç°ç¼–è¯‘å™¨æä¾›çš„å‡½æ•°å,é‡è½½

ğŸŠ å®ç°æ–¹å¼

* **æˆå‘˜å‡½æ•°**å®ç°`+`é‡è½½
  * æœ¬è´¨`object.operator+(object2)`
* **å…¨å±€å‡½æ•°**å®ç°`+`é‡è½½
  * æœ¬è´¨`operator+(objece1,object2)`

```cpp
class Person{
    public:
        // 1.æˆå‘˜å‡½æ•°å®ç°+é‡è½½
        Person operator+(const Person& p2){
            Person temp;
            temp.a = this->a + p2.a ;
            temp.b = this->b + p2.b ;
            return temp;//å€¼æ–¹å¼è¿”å›å±€éƒ¨å¯¹è±¡,è°ƒç”¨æ‹·è´æ„é€ ,è¿”å›çš„æ˜¯å‰¯æœ¬
        }
        int a;
        int b;
}

// å…¨å±€å‡½æ•°å®ç°é‡è½½+
Person operator+(Person &p1, Person &p2){
    Person temp;
    temp.a = p1.a + p2.a;
    temp.b = p1.b + p2.b;
    return temp;
}

// å…¨å±€å‡½æ•°(é‡è½½): å®ç°ä¸åŒé‡è½½+
// å®è´¨ Person temp = operator+(p,num)
//  Person temp = p+num
Person operator+(Person &p, int num){
    Person temp;
    temp.a = p.a +num;
    temp.b = p.b +num;
    return temp;
}

void test1(){
    Person p1;
    p1.a =10;
    p1.b =10;

    Person p2;
    p2.a =10;
    p2.b =10;

    Person p3 = p1+p2;//+é‡è½½,æˆå‘˜å‡½æ•°æœ¬è´¨ç›¸å½“äºp1.operator+(p2)
    //å…¨å±€å‡½æ•°æœ¬è´¨ : Person p3 = operator+(p1,p2)
}
```

## <<

å·¦ç§»è¿ç®—ç¬¦é‡è½½

* ä½ç§»
* **è¾“å‡º**
  * å¦‚é‡è½½å®ç°è‡ªå®šä¹‰ç±»çš„è¾“å‡º
  * <font color="red">é€šå¸¸ä¸é€‰æ‹©æˆå‘˜å‡½æ•°é‡è½½`<<`</font>
  * **åªèƒ½é€šè¿‡å…¨å±€å‡½æ•°é‡è½½`<<`è¿ç®—ç¬¦**
  * <font color="red">å¯ä»¥é…åˆå‹å…ƒ</font>

```cpp
class Person{
    public:
    // !!! é€šå¸¸ä¸ä½¿ç”¨æˆå‘˜å‡½æ•°é‡è½½<<è¿ç®—ç¬¦, p<<coutæ— æ³•å®ç°coutåœ¨å·¦è¾¹
    //   void operator<<(cout){
    //   }
        int a;
        int b;
}

//åˆ©ç”¨å…¨å±€å‡½æ•°å®ç°<<é‡è½½
// æœ¬è´¨
// operator<<(cout, p) : cout<<p
//ä¸èƒ½å€¼ä¼ é€’åˆ›å»ºå‰¯æœ¬,æ‰€ä»¥ä½¿ç”¨å¼•ç”¨/æŒ‡é’ˆä¼ å‚
cout operator<<(osstream &cout, Person &p){
    cout << "a: " << p.a << "b: " << p.b;
    return cout;
};

void test1(){
    Person p;
    p.a = 10;
    p.b = 20;
    //é»˜è®¤æ— æ³•è¾“å‡ºè‡ªå®šä¹‰ç±»å¯¹è±¡
    cout << p <<endl;//é‡è½½é“¾å¼<<cout
}
```

## ++

é€’å¢è¿ç®—ç¬¦é‡è½½

* é€šè¿‡`++`é‡è½½,å®ç°è‡ªå®šä¹‰æ•´å‹æ•°æ®
  * `++MyInt`
  * `MyInt++`**éœ€è¦è¿ç”¨å ä½å‚æ•°`int`,ç”¨äºåŒºåˆ†å‰ç½®åç½®`++`**

```cpp
class MyInt{
    friend &ostream operator<<(osstream& cout, MyInt myInt);//å…¨å±€å‡½æ•°åšå‹å…ƒ,è®¿é—®æœ¬ç±»numç§æœ‰å±æ€§
    public:
        MyInt(){
            num=0;
        }

        //æˆå‘˜å‡½æ•°å®ç°++é‡è½½
        //é‡è½½++myint
        &MyInt operator++(){
            num++;
            return *this;//å¤–éƒ¨æ‹¿ä¸€ä¸ªå¼•ç”¨ç±»å‹æ¥æ¥æ”¶*thiså¯¹è±¡æœ¬èº«???
            //æ­¤å¤„ä¸è¿”å›MyIntåŸå› : æé«˜æ•ˆç‡,å¤–éƒ¨ä¸å¿…åˆ›å»ºå‰¯æœ¬
        }

        //é‡è½½myint++
        // intä¸ºå ä½å‚æ•°,ç”¨äºåŒºåˆ†å‰ç½®åç½®++
        MyInt operator++(int){
            MyInt temp = *this;
            num++;
            return temp;//æ³¨æ„è¿”å›çš„æ˜¯å€¼,å› ä¸ºtempæ˜¯å±€éƒ¨å˜é‡(å¼¹æ ˆææ„),ä¸èƒ½ç”¨å¼•ç”¨æ¥æ”¶
        }

    private:
        int num;//å†…éƒ¨ç»´æŠ¤
}

//å…¨å±€å‡½æ•°å®ç°<<é‡è½½
//æ³¨æ„!!myintä¼ å€¼è€Œä¸æ˜¯å¼•ç”¨,å› ä¸ºä¼ å€¼ä¼ å…¥å‰¯æœ¬,
// ä¹‹åçš„++é‡è½½ä¼šè¿”å›å±€éƒ¨å˜é‡, ä¸èƒ½è¿”å›å¼•ç”¨
ostream& operator<<(ostream& cout, MyInt myInt){
    cout << myInt.num;//æ³¨æ„numä¸ºç§æœ‰æˆå‘˜å±æ€§,è¦å‹å…ƒ
}

void test(){
    MyInt myInt;
    cout << myInt <<endl;
    cout << ++myInt <<endl;
    cout << myInt++ <<endl;
}

```

### å¼•ç”¨ & å€¼ & é“¾å¼æ“ä½œ

ä¸ºä»€ä¹ˆ`++myInt`è¿”å›å¼•ç”¨æ‰æ”¯æŒé“¾å¼?

* å› ä¸ºå†…éƒ¨æ“ä½œ`num++`å,è¿”å›å¯¹è±¡æœ¬èº«`*this`
  * **å¦‚æœç”¨å€¼å‰¯æœ¬æ¥æ”¶**, åªä½œç”¨äºå½“å‰é“¾å¼, æ¯ä¸€æ¬¡éƒ½å¯¹æ–°å‰¯æœ¬è¿›è¡Œæ“ä½œ
    * æ“ä½œç»“æŸå‰¯æœ¬å°±æ²¡äº†
  * **å¦‚æœç”¨å¼•ç”¨æ¥æ”¶**,æœ¬è´¨ä¸ºç¬¬ä¸€æ¬¡åˆ›å»ºçš„å¯¹è±¡æŒ‡é’ˆ, ä½œç”¨äºä»»ä½•é“¾å¼, æ¯æ¬¡éƒ½å¯¹å…¶å¯¹è±¡æœ¬èº«çš„å±æ€§è¿›è¡Œæ“ä½œ

ä¸ºä»€ä¹ˆ`myInt++`è¿”å›å‰¯æœ¬å°±æ”¯æŒé“¾å¼?

* é¦–å…ˆ,å†…éƒ¨è¿”å›çš„æ˜¯`MyInt temp = *this`,**æ–°çš„å±€éƒ¨å˜é‡**
  * <font color="red">å±€éƒ¨å˜é‡æœ¬èº«å°±ä¸èƒ½ä½œä¸ºå¼•ç”¨çš„è¿”å›å€¼</font>,å¼¹æ ˆç›´æ¥è¢«ææ„,å¯èƒ½é€ æˆéæ³•è®¿é—®
* å…¶æ¬¡,å†…éƒ¨å¯¹å¯¹è±¡æœ¬èº«çš„å±æ€§`num++`é€’å¢, æ¯æ¬¡éƒ½å¯¹å…¶å¯¹è±¡æœ¬èº«è¿›è¡Œæ“ä½œ,**æ²¡æœ‰ä»»ä½•å¯¹è±¡å‰¯æœ¬**
  * æ‰€ä»¥é“¾å¼ç”Ÿæ•ˆ